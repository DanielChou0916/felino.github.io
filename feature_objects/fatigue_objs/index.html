<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Programming Objects: Fatigue Energy | Felino</title>
  <link rel="stylesheet" href="../../style.css" />
  <!-- MathJax for LaTeX support -->
  <script
    type="text/javascript"
    async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"
  ></script>
</head>
<body>

  <!-- drawer -->
  <div include-html="../../drawer_sub.html"></div>

  <!-- Main content -->
  <main class="sub-container">
    <section>
      <h1>Fatigue Energy Programming Object</h1>
    
      <p>
        The <code>ComputeFatigueEnergy</code> (and its AD variant <code>ADComputeFatigueEnergy</code>) material
        computes and outputs both the instantaneous fatigue energy and the accumulated fatigue energy.
        It supports multiple calculation and accumulation modes—see the
        <a
          href="https://danielchou0916.github.io/felino.github.io/technical_contents/fatigue_estimation/"
          target="_blank" rel="noopener"
          style="color: #93EBFA; text-decoration: underline;"
        >fatigue estimation</a> and
        <a
          href="https://danielchou0916.github.io/felino.github.io/technical_contents/fatigue_accumulation/"
          target="_blank" rel="noopener"
          style="color: #93EBFA; text-decoration: underline;"
        >fatigue accumulation</a> pages for details.
      </p>
    
      <h2>Parameters</h2>
      <ul>
        <li>
          <strong><code>energy_calculation</code></strong> (default <code>mean_load</code>):
          choose between <code>mean_load</code>, <code>elastic_energy</code>, or <code>spectral_activation</code>.
        </li>
        <li>
          <strong><code>accumulation_mode</code></strong> (default <code>Fatigue</code>):
          options are <code>Monotonic</code> (testing only), <code>Fatigue</code>,
          <code>FatigueICLA</code>, or <code>FatigueCLA</code>.
        </li>
        <li>
          For <code>FatigueICLA</code> and <code>FatigueCLA</code>, you must supply
          the cycle count variable via <code>N_cyc_variable = n_cycle</code>.
        </li>
        <li>
          <code>bar_psi_name</code> / <code>acc_bar_psi_name</code>:
          names for the instantaneous and accumulated fatigue-energy outputs.
        </li>
        <li>
          <code>multiply_by_D</code> (default <code>false</code>):
          if true, multiplies the instantaneous fatigue energy by the degradation function.
        </li>
        <li>
          <code>finite_strain_model</code> (default <code>false</code>):
          set to <code>true</code> to use the large-strain (linear-elastic) formulation.
        </li>
        <li>
          <code>uncracked_base_name</code>:
          prefix used to match the uncracked stress-strain fields (only needed when driving from
          <code>ComputePFFStress</code>).
        </li>
      </ul>
    
      <h2>Example Usage</h2>
      <div class="code-copy-container">
        <button class="copy-btn" title="Copy code">Copy</button>
        <div class="code-scroll">
          <pre><code>[Materials]
  [./fatigue_variable]
    type                  = ComputeFatigueEnergy
    uncracked_base_name   = uncracked
    finite_strain_model   = true
    multiply_by_D         = false
    energy_calculation    = mean_load
    accumulation_mode     = FatigueICLA
    N_cyc_variable        = n_cycle
    bar_psi_name          = current_fatigue
    acc_bar_psi_name      = bar_alpha
  [../]
[]</code></pre>
        </div>
      </div>
    
      <p>
        The resulting <code>bar_alpha</code> can then be plugged into your chosen fatigue‐degradation function.
        No special object is required—define it yourself. For example:
      </p>
    
      <div class="math-block">
        \[
          f(\bar{\alpha}) =
          \begin{cases}
            1, & \bar{\alpha} < \alpha_{\text{crit}}, \\[0.5em]
            \displaystyle
            \left(\frac{2\,\alpha_{\text{crit}}}{\bar{\alpha} + \alpha_{\text{crit}}}\right)^{2},
            & \bar{\alpha} \ge \alpha_{\text{crit}}.
          \end{cases}
        \]
      </div>
    
      <div class="code-copy-container">
        <button class="copy-btn" title="Copy code">Copy</button>
        <div class="code-scroll">
          <pre><code>[Materials]
  [./fatigue_function]
    type                     = ParsedMaterial
    material_property_names  = 'bar_alpha alpha_critical'
    property_name            = f_alpha
    expression               = 'if(bar_alpha > alpha_critical, (2*alpha_critical/(bar_alpha + alpha_critical))^2, 1)'
  [../]
[]</code></pre>
        </div>
      </div>
    </section>
    
    
    
  </main>

  <!-- Copy button script -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      document.querySelectorAll('.copy-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          const codeEl = btn.nextElementSibling;
          const text = codeEl.innerText.trim();
          navigator.clipboard.writeText(text).then(() => {
            btn.textContent = 'Copied!';
            setTimeout(() => btn.textContent = 'Copy', 1500);
          });
        });
      });
      // drawer include
      const includeEls = document.querySelectorAll('[include-html]');
      includeEls.forEach(el => {
        fetch(el.getAttribute('include-html'))
          .then(r => r.ok ? r.text() : Promise.reject(r.statusText))
          .then(html => {
            el.innerHTML = html;
            const toggle = document.getElementById('drawerToggle');
            const drawer = document.getElementById('drawer');
            if (toggle && drawer) toggle.addEventListener('click', () => drawer.classList.toggle('open'));
          })
          .catch(err => el.innerHTML = `<p>Error loading drawer: ${err}</p>`);
      });
    });
  </script>
</body>
</html>
