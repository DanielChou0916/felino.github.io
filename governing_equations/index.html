<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Governing Equations | Felino</title>
  <link rel="stylesheet" href="../style.css" />
  <!-- MathJax for LaTeX support -->
  <script
    type="text/javascript"
    async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"
  ></script>
</head>
<body>

  <!-- drawer -->
  <div include-html="../drawer_sub.html"></div>

  <!-- Main content -->
  <main class="sub-container">

    <section>
      <h1>Phase Field Fracture Model</h1>

      <h2>Strong Form</h2>
      <div class="math-block">
        \[
        g'(d)\,\psi^e + \frac{G_c f(\bar{\alpha})}{c_0 \ell} w'(d)
        - \nabla \cdot \left( \frac{2 G_c f(\bar{\alpha}) \ell}{c_0} \nabla d \right) = 0
        \]
      </div>

      <h2>Weak Form</h2>
      <div class="math-block">
        \[
        \int_\Omega \delta d \left[ g'(d)\psi^e + \frac{G_c f(\bar{\alpha})}{c_0 \ell} w'(d) \right] d\Omega
        + \int_\Omega \nabla \delta d \cdot \left( \frac{2 G_c f(\bar{\alpha}) \ell}{c_0} \nabla d \right) d\Omega -\int_{\Omega} \delta d\;
      \nabla\left(\tfrac{2G_{c}f(\bar{\alpha})\,\ell}{c_{0}}\right)\cdot\nabla d\,d\Omega = 0
        \]
      </div>

      <h2>Element Residual</h2>
      <div class="math-block">
        \[
        \mathbf{r}_d =
        \int_{\Omega_e} \boldsymbol{N}_d \left[ g'(d)\psi^e + \frac{G_c f(\bar{\alpha})}{c_0 \ell} w'(d) \right] d\Omega
        + \int_{\Omega_e} \boldsymbol{B}_d^\mathsf{T} \left( \frac{2 G_c f(\bar{\alpha}) \ell}{c_0} \right) \boldsymbol{B}_d \mathbf{d}_e \,d\Omega
        -\int_{\Omega_{e}}
      \boldsymbol{N}_{d}
      \Bigl[\nabla\left(\tfrac{2G_{c}f(\bar{\alpha})\,\ell}{c_{0}}\right)\cdot
            \boldsymbol{B}_{d}\mathbf{d}_{e}\Bigr]\,d\Omega\]
      </div>

      <h2>Element Stiffness</h2>
      <div class="math-block">
        \[
        \mathbf{K}_d =
        \int_{\Omega_e} \boldsymbol{N}_d \left[ g''(d)\psi^e + \frac{G_c f(\bar{\alpha})}{c_0 \ell} w''(d) \right] \boldsymbol{N}_d^\mathsf{T} \,d\Omega
        + \int_{\Omega_e} \boldsymbol{B}_d^\mathsf{T} \left( \frac{2 G_c f(\bar{\alpha}) \ell}{c_0} \right) \boldsymbol{B}_d \,d\Omega
        -\int_{\Omega_{e}}\boldsymbol{N}_{d}\left[\nabla\!\left(\tfrac{2G_{c}f(\bar{\alpha})\,\ell}{c_{0}}\right)\cdot
        \boldsymbol{B}_{d}\right]\,d\Omega.
        \]
      </div>
    </section>
    
    <hr>
    
    <section>
      <h1>Mechanical Equilibrium</h1>

      <h2>Strong Form</h2>
      <div class="math-block">
        \[
        \nabla \cdot \boldsymbol{\sigma} + \rho \mathbf{b} = \mathbf{0}
        \]
      </div>

      <h2>Weak Form</h2>
      <div class="math-block">
        \[
        \int_\Omega \nabla \delta \mathbf{u} : \boldsymbol{\sigma} \, d\Omega
        - \int_\Omega \delta \mathbf{u} \cdot \rho \mathbf{b} \, d\Omega
        - \int_\Gamma \delta \mathbf{u} \cdot \boldsymbol{\sigma} \mathbf{n} \, d\Gamma = 0
        \]
      </div>

      <h2>Element Residual</h2>
      <div class="math-block">
        \[
        \mathbf{r}_u =
        \int_{\Omega_e} \boldsymbol{B}_u^\mathsf{T} \boldsymbol{\sigma}_{\text{voigt}} \, d\Omega
        - \int_{\Omega_e} \boldsymbol{N}_u^\mathsf{T} \rho \mathbf{b} \, d\Omega
        - \int_{\Gamma_e} \boldsymbol{N}_u^\mathsf{T} \mathbf{S}(\mathbf{n}) \mathbf{C} \boldsymbol{B}_u \mathbf{u}_e \, d\Gamma
        \]
     </div>

      <h2>Element Stiffness</h2>
      <div class="math-block">
        \[
        \mathbf{K}_u =
        \int_{\Omega_e} \boldsymbol{B}_u^\mathsf{T} \mathbf{C} \boldsymbol{B}_u \, d\Omega
        \]
     </div>
    </section>

    <hr>

    <section>
      <h1>Heat Conduction</h1>

      <h2>Strong Form</h2>
      <div class="math-block">
        \[
        \rho c \dot{T} - \rho r - \nabla \cdot (k \nabla T) = 0
        \]
      </div>

      <h2>Weak Form</h2>
      <div class="math-block">
        \[
        \int_\Omega \delta T (\rho c \dot{T} - \rho r) \, d\Omega
        + \int_\Omega \nabla \delta T \cdot (k \nabla T) \, d\Omega = 0
        \]
      </div>

      <h2>Element Residual</h2>
      <div class="math-block">
        \[
        \mathbf{r}_T =
        \mathbf{M}_e \dot{\mathbf{T}}_e
        + \mathbf{K}_e \mathbf{T}_e
        - \mathbf{f}^{\text{body}}_e
        + \mathbf{f}^{\text{flux}}_e
        \]
      </div>

      <h2>Element Stiffness</h2>
      <div class="math-block">
        \[
        \mathbf{K}_e =
        \int_{\Omega_e} \boldsymbol{B}_T^\mathsf{T} k \boldsymbol{B}_T \, d\Omega
        \]
      </div>
    </section>

    <hr>

  </main>

<!-- drawer loading script -->
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const includeElements = document.querySelectorAll("[include-html]");

    includeElements.forEach(el => {
      const file = el.getAttribute("include-html");
      fetch(file)
        .then(response => {
          if (!response.ok) throw new Error(`Could not fetch ${file}`);
          return response.text();
        })
        .then(data => {
          el.innerHTML = data;

          // activate toggle 
          const toggle = document.getElementById('drawerToggle');
          const drawer = document.getElementById('drawer');
          if (toggle && drawer) {
            toggle.addEventListener('click', () => drawer.classList.toggle('open'));
          }
        })
        .catch(error => {
          el.innerHTML = `<p>Error loading ${file}</p>`;
        });
    });
  });
</script>
  
</body>
</html>
